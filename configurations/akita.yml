version: '2'

services:

  haproxy:
    extends:
      file: common.yml
      service: haproxy
    ports:
      - "80:80"

  consulserver:
    extends:
      file: common.yml
      service: consulserver

  consultemplate:
    extends:
      file: common.yml
      service: consultemplate
    command: -consul=consulserver:8500 -wait=5s -template="/tmp/haproxy.cfg.ctmpl:/usr/local/etc/haproxy/haproxy.cfg:docker restart configurations_haproxy_1" # $$(docker ps -q -f name=haproxy)
    volumes:
      - ${DOCKERFILES}/projects/akita/haproxy.cfg.ctmpl:/tmp/haproxy.cfg.ctmpl:ro
    volumes_from:
      - haproxy

  akita:
    extends:
      file: common.yml
      service: akita-proxyable

  mailcatcher:
    extends:
      file: common.yml
      service: mailcatcher

  nedcas:
    extends:
      file: common.yml
      service: nedcas

  nedapi:
    extends:
      file: common.yml
      service: nedapi

  neddb:
    extends:
      file: common.yml
      service: neddb
