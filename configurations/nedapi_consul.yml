version: '2'

services:

  # nedapi:
  #   extends:
  #     file: common.yml
  #     service: nedapi
  #   # ports:
  #   #   - 8082:8080

  consul-server:
    image: progrium/consul
    command: -server
    ports:
      - "8400:8400"
      - "8500:8500"
      - "8600:53/udp"

  nedapi-one:
    image: nedapi:develop
    # ports:
    #   - 8081:8080
    #   - 8444:8443
    environment:
      - MYSQL_ROOT_PASSWORD=root
      - MYSQL_USER=ned
      - MYSQL_USER_PASSWORD=ned
      - MYSQL_HOSTNAME=neddb
      - MYSQL_DATABASE=namedEntities
      - AMBRA_DATABASE=ambra
      - RINGGOLD_DATABASE=ringgold
    volumes:
      - ${DOCKERFILES}/projects/selfsigned.jks:/root/web.jks:ro

  nedapi-two:
    image: nedapi:develop
    # ports:
    #   - 8081:8080
    #   - 8444:8443
    environment:
      - MYSQL_ROOT_PASSWORD=root
      - MYSQL_USER=ned
      - MYSQL_USER_PASSWORD=ned
      - MYSQL_HOSTNAME=neddb
      - MYSQL_DATABASE=namedEntities
      - AMBRA_DATABASE=ambra
      - RINGGOLD_DATABASE=ringgold
    volumes:
      - ${DOCKERFILES}/projects/selfsigned.jks:/root/web.jks:ro

  nedcas:
    extends:
      file: common.yml
      service: nedcas

  neddb:
    extends:
      file: common.yml
      service: neddb
