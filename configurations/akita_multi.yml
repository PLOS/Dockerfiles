version: '2'

services:

  # TODO: add depends_on for these

  akita-lb:
    extends:
      file: common.yml
      service: akita-lb

  akita-consultemplate:
    extends:
      file: common.yml
      service: akita-consultemplate
    volumes_from:
      - akita-lb

  akita:
    extends:
      file: common.yml
      service: akita-proxyable
    environment:
      - CAS_URL=https://nedcas-lb:443

  nedcas-lb:
    extends:
      file: common.yml
      service: nedcas-lb

  nedcas-consultemplate:
    extends:
      file: common.yml
      service: nedcas-consultemplate
    volumes_from:
      - nedcas-lb

  nedcas:
    extends:
      file: common.yml
      service: nedcas-proxyable

  nedapi:
    extends:
      file: common.yml
      service: nedapi

  consulserver:
    extends:
      file: common.yml
      service: consulserver

  neddb:
    extends:
      file: common.yml
      service: neddb
    ports:
      - "3307:3306"

  mailcatcher:
    extends:
      file: common.yml
      service: mailcatcher
