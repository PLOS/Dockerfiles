akita:
  image: akita:current
  ports:
    - 80:80
    - 443:443
  links:
    - nedapi:nedapi
    - mailcatcher:mailcatcher
  environment:
    - NED_SERVICE=http://nedapi:8080
    - MAILER_ADDRESS=mailcatcher
    - NED_USERAPP=dev
    - NED_PASSWORD=dev
    - SECRET_KEY_BASE=secretgoeshere
    - SSL=generatekeys  # options = none, existingkeys, generatekeys
  # volumes:    # when using SSL=existingkeys
  #   - /etc/nginx/ssl/nginx.key:/etc/nginx/ssl/nginx.key:ro
  #   - /etc/nginx/ssl/nginx.crt:/etc/nginx/ssl/nginx.crt:ro

mailcatcher:
  image: mailcatcher
  ports:
    - "1080:1080"

neddb:
  image: percona:5.6
  environment:
    - MYSQL_ROOT_PASSWORD=root
  # volumes:    # to persist database between runs
  #   - /var/lib/mysql

nedapi:
  image: nedapi:current
  ports:
    - "8081:8080"
  links:
    - neddb:neddb
  environment:
    - MYSQL_ROOT_PASSWORD=root
    - MYSQL_USER=ned
    - MYSQL_USER_PASSWORD=ned
    - MYSQL_HOSTNAME=neddb
    - MYSQL_DATABASE=namedEntities

nedcas:
  image: nedcas:current
  links:
    - neddb:neddb
    - nedapi:nedapi
  ports:
    - "8090:8080"
  environment:
    - MYSQL_ROOT_PASSWORD=root
    - MYSQL_USER=ned
    - MYSQL_USER_PASSWORD=ned
    - MYSQL_HOSTNAME=neddb
    - MYSQL_DATABASE=namedEntities
    - NED_SERVICE=http://nedapi:8080
