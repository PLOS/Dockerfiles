version: '2'

services:

  casproxy:
    extends:
      file: common.yml
      service: casproxy

  casconsultemplate:
    extends:
      file: common.yml
      service: casconsultemplate
    volumes_from:
      - casproxy

  consulserver:
    extends:
      file: common.yml
      service: consulserver

  nedcas0:
    extends:
      file: common.yml
      service: nedcas-proxyable
    environment:
      - CLUSTER_MEMBERS=nedcas0,nedcas1
      - CATALINA_OPTS=-Dlog4j.configurationFile=/etc/cas/log4j2.xml
      - JPDA_OPTS=-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n

  nedcas1:
    extends:
      file: common.yml
      service: nedcas-proxyable
    environment:
      - CLUSTER_MEMBERS=nedcas1,nedcas0
      - CATALINA_OPTS=-Dlog4j.configurationFile=/etc/cas/log4j2.xml
      - JPDA_OPTS=-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=8001,server=y,suspend=n

  nedapi:
    extends:
      file: common.yml
      service: nedapi

  neddb:
    extends:
      file: common.yml
      service: neddb
